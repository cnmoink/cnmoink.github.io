KEEP.initCodeBlockTools=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this);this.parentNode.removeChild(this);e.appendChild(this)};const{style:e}=KEEP.theme_config?.code_copy||{};const{style:t}=KEEP.theme_config?.code_block||{};const{style:o}=KEEP.theme_config?.code_block?.tools||{};const s=(e||t||o||"default")==="mac";const c=s?"fas fa-chevron-left":"fas fa-chevron-right";const{copy:n,copied:a,fold:l,folded:i}=KEEP.language_code_block;const d=`<span class="tool fold tooltip" data-content="${l}" data-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach((e=>{let t=e.classList.length?e.classList[1].toUpperCase():"";if(t==="PLAINTEXT"){t=""}const o=document.createElement("div");o.classList.add("highlight-container");if(s){o.classList.add("mac")}e.wrap(o);const r=`${t?'<span class="code-lang">'+t+"</span>":""}`;o.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">\n        ${s?d+r:"<span>"+d+r+"</span>"}\n        <span class="tool copy tooltip" data-content="${n}" data-offset-y="-2px"><i class="fas fa-copy"></i></span>\n      </div>`);const f=e.parentNode.querySelector(".code-tools-box");const p=f.querySelector(".copy");const y=f.querySelector(".fold");p.addEventListener("click",(t=>{const o=t.currentTarget;const s=[...e.querySelectorAll(".code .line")].map((e=>e.innerText)).join("\n");const c=document.createElement("textarea");c.style.top=window.scrollY+"px";c.style.position="absolute";c.style.opacity="0";c.readOnly=true;c.value=s;document.body.append(c);const n=document.getSelection();const l=n.rangeCount>0?n.getRangeAt(0):false;c.select();c.setSelectionRange(0,s.length);c.readOnly=false;const i=document.execCommand("copy");const d=o.querySelector("i");const r=f.querySelector(".copy .tooltip-content");if(i){d.className="fas fa-check";r&&(r.innerHTML=a)}else{d.className="fas fa-times"}c.blur();o.blur();if(l){n.removeAllRanges();n.addRange(l)}document.body.removeChild(c)}));p.addEventListener("mouseleave",(e=>{setTimeout((()=>{e.target.querySelector("i").className="fas fa-copy";const t=f.querySelector(".copy .tooltip-content");t&&(t.innerHTML=n)}),500)}));let u=false;y.addEventListener("click",(t=>{const o=t.currentTarget;const s=o.querySelector("i");const n=f.querySelector(".fold .tooltip-content");u=!u;if(u){s.className=c;e.classList.add("folded");f.classList.add("folded");n&&(n.innerHTML=i)}else{s.className="fas fa-chevron-down";e.classList.remove("folded");f.classList.remove("folded");n&&(n.innerHTML=l)}}))}))};