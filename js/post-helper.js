function initToggleShowToc(){KEEP.utils.postHelper={postPageContainerDom:document.querySelector(".post-page-container"),toggleShowTocBtnDom:document.querySelector(".toggle-show-toc"),toggleShowTocIcon:document.querySelector(".toggle-show-toc i"),mainContentDom:document.querySelector(".main-content"),postToolsDom:document.querySelector(".post-tools"),goToCommentsDom:document.querySelector(".post-tools .go-to-comments"),isShowToc:false,initToggleToc(){this.toggleShowTocBtnDom&&this.toggleShowTocBtnDom.addEventListener("click",(()=>{this.isShowToc=!this.isShowToc;KEEP.styleStatus.isShowToc=this.isShowToc;KEEP.setStyleStatus();this.handleToggleToc(this.isShowToc)}))},handleToggleToc(t){if(t){this.postPageContainerDom.classList.add("show-toc");document.body.classList.add("has-toc")}else{this.postPageContainerDom.classList.remove("show-toc");document.body.classList.remove("has-toc")}setTimeout((()=>{this.setPostToolsLeft()}),120)},hasToc(t){this.toggleShowTocBtnDom.style.display="flex";this.isShowToc=t;this.handleToggleToc(t)},setPostToolsLeft(t){const o=t?t:this.mainContentDom.getBoundingClientRect().width.toFixed(0);let e=5;if(window.innerWidth<=800){e=3}this.postToolsDom.style.opacity=`1`;this.postToolsDom.style.left=`calc((100vw - ${o}px) / 2 - ${e}rem)`},initSetPostToolsLeft(){setTimeout((()=>{this.setPostToolsLeft()}),150);window.addEventListener("resize",(()=>{this.setPostToolsLeft()}))},goToComments(){const t=document.querySelector("#comments-anchor");if(this.goToCommentsDom&&t){this.goToCommentsDom.addEventListener("click",(o=>{o.preventDefault();let e=window.scrollY;e=e===0?-20:e;const s=t.getBoundingClientRect().top+e;window.anime({targets:document.scrollingElement,duration:300,easing:"linear",scrollTop:s,complete:()=>{setTimeout((()=>{KEEP.utils.pageTop_dom.classList.add("hide")}),150)}})}))}},watchPostCommentsCount(){const t=this.postToolsDom.querySelector(".post-comments-count");if(!t)return;const o={attributes:true,childList:true};const e=function(o){o.forEach((o=>{if(o.type==="childList"){const e=Number(o.target.innerHTML);if(e>0){t.style.display="flex";if(e>99){t.innerHTML="99+";s.disconnect()}}}}))};const s=new MutationObserver(e);s.observe(t,o)},initSetPostLink(){const t=document.querySelector(".copyright-info-content .post-link .content");t&&(t.innerHTML=decodeURI(window.location.href))},copyCopyrightInfo(){const t=document.querySelector(".copyright-info-content");const o=document.querySelector(".copy-copyright-info");const e=o.querySelector("i");const s=KEEP.language_copy_copyright;const n=KEEP.hexo_config.language==="en"?": ":"ï¼š";let i=false;const c=(t,s,n,c)=>{if(e){e.classList.remove(t);e.classList.add(s)}const l=o.querySelector(".tooltip-content");l&&(l.innerHTML=n);i=c};o.addEventListener("click",(()=>{if(!i){const o=t.querySelector(".post-author .content").innerHTML;const e=t.querySelector(".post-link .content").innerHTML;const i=`${s.author}${n}${o}\n${s.link}${n}${e}`;navigator.clipboard.writeText(i).then((()=>{c("fa-copy","fa-check",s.copied,true)}))}}));o.addEventListener("mouseleave",(()=>{setTimeout((()=>{c("fa-check","fa-copy",s.copy,false)}),500)}))},setArticleAgingDays(){const t=document.querySelector(".article-content .article-aging-tips");if(t){const o=t.querySelector(".days");const e=Date.now();const s=24*60*60*1e3;const n=(t.dataset?.agingDays||30)*s;const i=new Date(t.dataset.updateDate).getTime();const c=e-i;const l=(c/s).toFixed(0);if(c>=n){o.innerHTML=l;t.style.display="block"}}}};KEEP.utils.postHelper.initSetPostToolsLeft();KEEP.utils.postHelper.setArticleAgingDays();if(KEEP.theme_config.toc?.enable===true){KEEP.utils.postHelper.initToggleToc()}if(KEEP.theme_config.comment?.enable===true){KEEP.utils.postHelper.goToComments();KEEP.utils.postHelper.watchPostCommentsCount()}if(KEEP.theme_config.post?.copyright_info===true){KEEP.utils.postHelper.initSetPostLink();KEEP.utils.postHelper.copyCopyrightInfo()}}if(KEEP.theme_config.pjax?.enable===true&&KEEP.utils){initToggleShowToc()}else{window.addEventListener("DOMContentLoaded",initToggleShowToc)}